<!DOCTYPE html>
<html lang="en" translate="no">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>El Pollo Loco</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="img/mexicohut.png" type="image/x-icon">
</head>

<body onload="init()">
    <h1>El Pollo Loco</h1>
    <!-- orientation notification (hidden by default) -->
    <div id="orientation-notice" aria-hidden="true"></div>
    <script>
        // KontextmenÃ¼ auf allen Buttons verhindern
        document.addEventListener('DOMContentLoaded', function () {
            document.querySelectorAll('button').forEach(btn => {
                btn.addEventListener('contextmenu', e => e.preventDefault());
            });

            // Touch-detection: add class so CSS can show mobile controls only on touch devices
            function isTouchDevice() {
                return ('ontouchstart' in window) || (navigator.maxTouchPoints && navigator.maxTouchPoints > 0) || (navigator.msMaxTouchPoints && navigator.msMaxTouchPoints > 0);
            }
            if (isTouchDevice()) {
                document.body.classList.add('touch-device');
                // orientation change notification
                const orientationNoticeEl = document.getElementById('orientation-notice');
                let _orientTimeout = null;
                let _lastPortrait = window.matchMedia('(orientation: portrait)').matches;

                function showOrientationNotice(text) {
                    if (!orientationNoticeEl) return;
                    orientationNoticeEl.textContent = text;
                    orientationNoticeEl.setAttribute('aria-hidden', 'false');
                    orientationNoticeEl.classList.add('visible');
                    clearTimeout(_orientTimeout);
                    _orientTimeout = setTimeout(() => {
                        orientationNoticeEl.classList.remove('visible');
                        orientationNoticeEl.setAttribute('aria-hidden', 'true');
                    }, 3000);
                }

                function handleOrientationChange() {
                    const isPortrait = window.matchMedia('(orientation: portrait)').matches;
                    if (isPortrait !== _lastPortrait) {
                        _lastPortrait = isPortrait;
                        const msg = isPortrait ? 'GerÃ¤t gedreht â€” Hochformat' : 'GerÃ¤t gedreht â€” Querformat';
                        showOrientationNotice(msg);
                    }
                }

                window.addEventListener('orientationchange', handleOrientationChange);
                // Also listen to resize (some browsers don't fire orientationchange reliably)
                window.addEventListener('resize', handleOrientationChange);
            }
        });
    </script>

    <div id="game-container">
        <canvas id="Canvas" width="720px" height="480px"> </canvas>
        <nav class="normalfont">
            <h3>Steuerung (PC):</h3> <br>
            <span>Gehen: A / D oder <kbd>&#8592;</kbd> / <kbd>&#8594;</kbd> &nbsp;  <br> &nbsp; Springen: Leertaste &nbsp;  <br>
                &nbsp; Werfen: S</span>
        </nav>
        <div id="pc-controls" style="margin-top: 12px; text-align: center; font-size: 1.1em;">
        </div>
        <button id="start-btn" onclick="startGame()">START</button>
        <button id="fullscreen-btn" onclick="toggleFullscreen()">â›¶</button>
        <button id="mute-btn" onclick="toggleMute()" title="Stumm">ðŸ”‡</button>

        <!-- Mobile Controls -->
        <div id="mobile-controls">
            <div class="mobile-left">
                <button class="mobile-btn" id="btn-left">&#60;</button>
                <button class="mobile-btn" id="btn-right">&#62;</button>
            </div>
            <div class="mobile-right">
                <button class="mobile-btn" id="btn-jump">&#8679;</button>
                <button class="mobile-btn" id="btn-throw">&#128165;</button>
            </div>
        </div>
    </div>
    <a class="impressum-link-btn" href="impressum.html">Impressum</a>

    <script src="classes/drawable-object.class.js"></script>
    <script src="classes/movable-object.class.js"></script>
    <script src="classes/statusbar.class.js"></script>
    <script src="classes/statusbar-endboss.class.js"></script>
    <script src="classes/statusbar-bottle.class.js"></script>
    <script src="classes/statusbar-coin.class.js"></script>
    <script src="classes/gameover-screen.class.js"></script>
    <script src="classes/start-screen-class.js"></script>
    <script src="classes/background.class.js"></script>
    <script src="classes/keyboard.class.js"></script>
    <script src="classes/character.class.js"></script>
    <script src="classes/clouds.class.js"></script>
    <script src="classes/chicken.class.js"></script>
    <script src="classes/babychicken.class.js"></script>
    <script src="classes/bottle.class.js"></script>
    <script src="classes/coin.class.js"></script>
    <script src="classes/level.class.js"></script>
    <script src="classes/thowable-object.class.js"></script>
    <script src="classes/endboss.class.js"></script>
    <script src="levels/level1.js"></script>
    <script src="classes/world.class.js"></script>
    <script src="js/game.js"></script>
</body>

</html>